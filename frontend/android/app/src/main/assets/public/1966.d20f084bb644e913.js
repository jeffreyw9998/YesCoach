"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1966],{1966:(f,u,a)=>{a.r(u),a.d(u,{RegisterPage:()=>M});var _=a(5861),d=a(6895),s=a(4006),i=a(6114),e=a(8256),c=a(6435),h=a(6008),p=a(1407);function m(l,g){if(1&l){const n=e.EpF();e.TgZ(0,"ion-datetime",16),e.NdJ("ngModelChange",function(o){e.CHM(n);const r=e.oxw();return e.KtG(r.userInfo.birthday=o)}),e.qZA()}if(2&l){const n=e.oxw();e.Q6J("max",n._18YearsAgo)("ngModel",n.userInfo.birthday)}}let M=(()=>{class l{constructor(n,t,o,r){this.uService=n,this.apiService=t,this.router=o,this.alertController=r,this.userInfo={id:this.uService.user.uid,name:this.uService.user.displayName,email:this.uService.user.email,height:20,weight:7,birthday:""}}get _18YearsAgo(){const n=new Date,t=n.getFullYear()-18,o=n.getMonth()+1,r=n.getDate();return new Date(`${t}-${o}-${r}`).toISOString()}ngOnInit(){this.userInfo.birthday=this._18YearsAgo}register(){this.apiService.registerAndPullData(this.userInfo,{access_token:this.uService.user.authentication.accessToken}).subscribe({next:t=>{this.uService.userInfo=t;const o=new Date;this.uService.nextPullDataDate=new Date(o.getFullYear(),o.getMonth(),o.getDate()+1),this.router.navigate(["/"]).then(()=>{})},error:t=>{console.log(t),this.presentAlert(t).then(()=>{})}})}get photoUrl(){return null===this.uService.user?"":this.uService.user.photoUrl}presentAlert(n){var t=this;return(0,_.Z)(function*(){const o=yield t.alertController.create({header:"Oh no",message:`${n.error.detail||n.statusText}. You will be redirected to the login page`,buttons:["OK"]});yield t.uService.signOut(),yield o.present(),yield t.router.navigate(["/login"])})()}}return l.\u0275fac=function(n){return new(n||l)(e.Y36(c.K),e.Y36(h.s),e.Y36(p.F0),e.Y36(i.Br))},l.\u0275cmp=e.Xpm({type:l,selectors:[["app-register"]],standalone:!0,features:[e.jDz],decls:39,vars:8,consts:[[3,"translucent"],[3,"fullscreen"],["collapse","condense"],["size","large"],[1,"ion-margin"],[1,"ion-justify-content-center","ion-padding-bottom"],["referrerpolicy","no-referrer","alt","User photo",3,"src"],["size","12"],["label","Name","label-placement","floating","autocapitalize","words","required","true","type","text","color","primary",3,"ngModel","ngModelChange"],["label","Email","label-placement","floating","type","email","readonly","true","color","primary",3,"ngModel","ngModelChange"],["size","6"],["label","Height (inches)","label-placement","floating","type","number","required","true","min","20","color","primary",3,"ngModel","ngModelChange"],["label","Weight (pounds)","label-placement","floating","type","number","required","true","min","7","color","primary",3,"ngModel","ngModelChange"],["datetime","birth-datetime"],[3,"keepContentsMounted"],["expand","block",3,"click"],["id","birth-datetime","presentation","date",3,"max","ngModel","ngModelChange"]],template:function(n,t){1&n&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),e._uU(3,"Register"),e.qZA()()(),e.TgZ(4,"ion-content",1)(5,"ion-header",2)(6,"ion-toolbar")(7,"ion-title",3),e._uU(8,"register"),e.qZA()()(),e.TgZ(9,"ion-grid",4)(10,"ion-row",5),e._UZ(11,"img",6),e.qZA(),e.TgZ(12,"ion-row")(13,"ion-col",7)(14,"ion-item")(15,"ion-input",8),e.NdJ("ngModelChange",function(r){return t.userInfo.name=r}),e.qZA()()()(),e.TgZ(16,"ion-row")(17,"ion-col",7)(18,"ion-item")(19,"ion-input",9),e.NdJ("ngModelChange",function(r){return t.userInfo.email=r}),e.qZA()()()(),e.TgZ(20,"ion-row")(21,"ion-col",10)(22,"ion-item")(23,"ion-input",11),e.NdJ("ngModelChange",function(r){return t.userInfo.height=r}),e.qZA()()(),e.TgZ(24,"ion-col")(25,"ion-item")(26,"ion-input",12),e.NdJ("ngModelChange",function(r){return t.userInfo.weight=r}),e.qZA()()()(),e.TgZ(27,"ion-row")(28,"ion-col")(29,"ion-item")(30,"ion-label"),e._uU(31,"Birthday"),e.qZA(),e._UZ(32,"ion-datetime-button",13),e.TgZ(33,"ion-modal",14),e.YNc(34,m,1,2,"ng-template"),e.qZA()()()(),e.TgZ(35,"ion-row")(36,"ion-col",7)(37,"ion-button",15),e.NdJ("click",function(){return t.register()}),e._uU(38,"Register"),e.qZA()()()()()),2&n&&(e.Q6J("translucent",!0),e.xp6(4),e.Q6J("fullscreen",!0),e.xp6(7),e.Q6J("src",t.photoUrl,e.LSH),e.xp6(4),e.Q6J("ngModel",t.userInfo.name),e.xp6(4),e.Q6J("ngModel",t.userInfo.email),e.xp6(4),e.Q6J("ngModel",t.userInfo.height),e.xp6(3),e.Q6J("ngModel",t.userInfo.weight),e.xp6(7),e.Q6J("keepContentsMounted",!0))},dependencies:[i.Pc,i.YG,i.wI,i.W2,i.x4,i.Mj,i.jY,i.Gu,i.pK,i.Ie,i.Q$,i.Nd,i.wd,i.sr,i.ki,i.as,i.QI,i.j9,d.ez,s.u5,s.JJ,s.Q7,s.On]}),l})()}}]);